# Travis CI script to invoke coveralls.io coverage reporting
# (C) 2015 Niall Douglas

language: cpp
os:
 - linux

notifications:
  email:
#    recipients:
#      - one@example.com
#      - other@example.com
    on_success: change # [always|never|change] # default: change
    on_failure: change # [always|never|change] # default: always

before_install:
 - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test; fi
 - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get update -qq; fi
 - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get install -qq valgrind; fi
 - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get install -qq g++-4.9; fi
 - git submodule update --init --recursive

script:
 - CXX=g++-4.9 make debug
 - ./test_utp_crust
 - valgrind ./test_utp_crust
 